# Пользовательские требования (User Requirements) — RetailHub

Этот документ описывает, кто и как будет использовать систему, а также ключевые сценарии взаимодействия.

## 1. Роли пользователей

| Роль | Описание | Обязанности |
|:---:|:---:|:---|
| **Клиент** | Посетитель магазина | Получить помощь и консультацию по товару (Scan QR → Request). |
| **Менеджер** | Директор, ст. смены | Управление сменами, QR-кодами, аналитика эффективности. |
| **Консультант** | Сотрудник зала | Принимать и выполнят заявки (Push → Visit). |

---

## 2. Пользовательские истории (User Stories)

### 2.1. Клиент (Customer)
1.  **US-C-01:** Как клиент, я хочу иметь возможность вызвать консультанта, отсканировав QR-код в отделе, чтобы получить помощь по товару.
2.  **US-C-02:** Как клиент, я хочу видеть статус своей заявки ("Ищем", "Назначен", "Иван идет") в браузере телефона, чтобы понимать, когда ждать помощь.
3.  **US-C-03:** Как клиент, я хочу иметь возможность напомнить о себе ("Позвать снова"), если консультант долго не приходит.
4.  **US-C-04:** Как клиент, я хочу позвать другого консультанта, если назначенный сотрудник не явился в течение 3 минут.
5.  **US-C-05:** (Escalation) Как клиент, я хочу, чтобы менеджер узнал, если мою заявку игнорируют более 5 минут.

### 2.2. Консультант (Consultant)
1.  **US-E-01:** Как консультант, я хочу получать мгновенные Push-уведомления о новых заявках в моем отделе, чтобы максимально быстро отреагировать.
2.  **US-E-02:** Как консультант, я хочу видеть список доступных мне заявок и брать их в работу одной кнопкой.
3.  **US-E-03:** Как консультант, я хочу начинать и завершать свою смену в приложении, чтобы мое рабочее время учитывалось корректно.
4.  **US-E-04:** Как консультант, я хочу видеть историю своих смен и выполненных заявок, чтобы контролировать свои показатели.
5.  **US-E-05:** Как консультант, я хочу получать уведомления, если я забыл закрыть смену.

### 2.3. Менеджер (Manager)
1.  **US-M-01:** Как менеджер, я хочу видеть текущее состояние магазина (Dashboard): количество активных консультантов и заявок в очереди.
2.  **US-M-02:** Как менеджер, я хочу управлять QR-кодами (создавать, удалять, перепечатывать), чтобы актуализировать навигацию в зале.
3.  **US-M-03:** Как менеджер, я хочу регистрировать новых сотрудников и назначать им отделы (компетенции).
4.  **US-M-04:** Как менеджер, я хочу видеть детальную аналитику по каждому сотруднику (время реакции, кол-во заявок), чтобы премировать лучших.
5.  **US-M-05:** Как менеджер, я хочу видеть историю всех заявок, чтобы разбирать жалобы клиентов.
6.  **US-M-06 (Escalation):** Как менеджер, я хочу получать экстренные Push-уведомления, если заявка в зале висит без ответа более 5 минут, чтобы немедленно вмешаться.

---

## 3. Сценарии использования (Use Cases)

### UC-01: Создание заявки (Happy Path)
1.  **Клиент** сканирует QR-код камерой.
2.  Открывается веб-страница, клиент видит название отдела ("Телевизоры").
3.  Клиент нажимает "Вызвать консультанта".
4.  Система создает заявку, статус = `CREATED`.
5.  Свободные консультанты отдела получают Push-уведомление.
6.  **Консультант** открывает пуш и нажимает "Взять".
7.  Статус заявки = `ASSIGNED`. Клиент видит: "К вам идет Иван".
8.  Консультант подходит, консультирует.
9.  Консультант нажимает "Завершить".
10. Статус заявки = `COMPLETED`. Клиент видит "Спасибо".

### UC-02A: Игнорирование (Unhappy Path - No Assign)
1.  Клиент создает заявку. Статус = `CREATED`.
2.  Все консультанты заняты или игнорируют.
3.  **T+3 мин**: Если никто не взял заявку.
    *   Все консультанты (даже "отошедшие") получают повторный тревожный Push: "Заявка ждет 3 минуты!".
4.  **T+5 мин**: Если снова никто не взял.
    *   Менеджер получает Push-уведомление: "Эскалация! Заявка просрочена".
    *   Заявка помечается как `ESCALATED`.

### UC-02B: Медленный консультант (Unhappy Path - Slow Service)
1.  Консультант берет заявку. Статус = `ASSIGNED`.
2.  **T+1 мин**: Консультант не пришел.
    *   Клиент нажимает "Напомнить".
    *   Консультант получает Push: "Клиент ждет вас".
3.  **T+3 мин**: Консультант все еще не пришел.
    *   Кнопка "Позвать другого" становится активной.
    *   Клиент нажимает её.
    *   Заявка сбрасывается в `CREATED` (предыдущий консультант — штраф).
    *   Менеджер получает уведомление: "Отказ от консультанта".
    *   Идет поиск нового сотрудника (как в UC-01).
